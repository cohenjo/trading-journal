
"""add new_trades table

Revision ID: d869bcf363dc
Revises: b2d42d55f559
Create Date: 2025-07-03 19:38:20.132173

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import postgresql
import sqlmodel

# revision identifiers, used by Alembic.
revision = 'd869bcf363dc'
down_revision = 'b2d42d55f559'
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('manualtrade',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('timestamp', sa.DateTime(), nullable=False),
    sa.Column('symbol', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('side', sqlmodel.sql.sqltypes.AutoString(), nullable=False),
    sa.Column('size', sa.Float(), nullable=False),
    sa.Column('entry_price', sa.Float(), nullable=False),
    sa.Column('exit_price', sa.Float(), nullable=False),
    sa.Column('pnl', sa.Float(), nullable=False),
    sa.Column('notes', sqlmodel.sql.sqltypes.AutoString(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.add_column('trade', sa.Column('tradeID', sa.Integer(), nullable=False))
    op.add_column('trade', sa.Column('accountId', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('trade', sa.Column('acctAlias', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('model', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('currency', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('trade', sa.Column('fxRateToBase', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('assetCategory', sqlmodel.sql.sqltypes.AutoString(), nullable=False))
    op.add_column('trade', sa.Column('subCategory', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('description', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('conid', sa.Integer(), nullable=False))
    op.add_column('trade', sa.Column('securityID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('securityIDType', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('cusip', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('isin', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('figi', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('listingExchange', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('underlyingConid', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('underlyingSymbol', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('underlyingSecurityID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('underlyingListingExchange', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('issuer', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('issuerCountryCode', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('multiplier', sa.Integer(), nullable=False))
    op.add_column('trade', sa.Column('relatedTradeID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('strike', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('reportDate', sa.Date(), nullable=True))
    op.add_column('trade', sa.Column('expiry', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('dateTime', sa.DateTime(), nullable=True))
    op.add_column('trade', sa.Column('putCall', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('tradeDate', sa.Date(), nullable=True))
    op.add_column('trade', sa.Column('principalAdjustFactor', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('settleDateTarget', sa.Date(), nullable=True))
    op.add_column('trade', sa.Column('transactionType', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('exchange', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('quantity', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('tradePrice', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('tradeMoney', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('proceeds', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('taxes', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('ibCommission', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('ibCommissionCurrency', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('netCash', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('closePrice', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('openCloseIndicator', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('cost', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('fifoPnlRealized', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('mtmPnl', sa.Float(), nullable=False))
    op.add_column('trade', sa.Column('origTradePrice', sa.Float(), nullable=True))
    op.add_column('trade', sa.Column('origTradeDate', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('origTradeID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('origOrderID', sa.Integer(), nullable=True))
    op.add_column('trade', sa.Column('origTransactionID', sa.Integer(), nullable=True))
    op.add_column('trade', sa.Column('buySell', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('clearingFirmID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('ibOrderID', sa.Integer(), nullable=True))
    op.add_column('trade', sa.Column('transactionID', sa.Integer(), nullable=True))
    op.add_column('trade', sa.Column('ibExecID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('relatedTransactionID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('rtn', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('brokerageOrderID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('orderReference', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('volatilityOrderLink', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('exchOrderId', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('extExecID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('orderTime', sa.DateTime(), nullable=True))
    op.add_column('trade', sa.Column('openDateTime', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('holdingPeriodDateTime', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('whenRealized', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('whenReopened', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('levelOfDetail', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('changeInPrice', sa.Float(), nullable=True))
    op.add_column('trade', sa.Column('changeInQuantity', sa.Float(), nullable=True))
    op.add_column('trade', sa.Column('orderType', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('traderID', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('isAPIOrder', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('accruedInt', sa.Float(), nullable=True))
    op.add_column('trade', sa.Column('initialInvestment', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('serialNumber', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('deliveryType', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('commodityType', sqlmodel.sql.sqltypes.AutoString(), nullable=True))
    op.add_column('trade', sa.Column('fineness', sa.Float(), nullable=True))
    op.add_column('trade', sa.Column('weight', sa.Float(), nullable=True))
    op.drop_column('trade', 'id')
    op.drop_column('trade', 'entry_price')
    op.drop_column('trade', 'pnl')
    op.drop_column('trade', 'size')
    op.drop_column('trade', 'timestamp')
    op.drop_column('trade', 'side')
    op.drop_column('trade', 'exit_price')
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.add_column('trade', sa.Column('exit_price', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('side', sa.VARCHAR(), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('timestamp', postgresql.TIMESTAMP(), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('size', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('pnl', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('entry_price', sa.DOUBLE_PRECISION(precision=53), autoincrement=False, nullable=False))
    op.add_column('trade', sa.Column('id', sa.INTEGER(), autoincrement=True, nullable=False))
    op.drop_column('trade', 'weight')
    op.drop_column('trade', 'fineness')
    op.drop_column('trade', 'commodityType')
    op.drop_column('trade', 'deliveryType')
    op.drop_column('trade', 'serialNumber')
    op.drop_column('trade', 'initialInvestment')
    op.drop_column('trade', 'accruedInt')
    op.drop_column('trade', 'isAPIOrder')
    op.drop_column('trade', 'traderID')
    op.drop_column('trade', 'orderType')
    op.drop_column('trade', 'changeInQuantity')
    op.drop_column('trade', 'changeInPrice')
    op.drop_column('trade', 'levelOfDetail')
    op.drop_column('trade', 'whenReopened')
    op.drop_column('trade', 'whenRealized')
    op.drop_column('trade', 'holdingPeriodDateTime')
    op.drop_column('trade', 'openDateTime')
    op.drop_column('trade', 'orderTime')
    op.drop_column('trade', 'extExecID')
    op.drop_column('trade', 'exchOrderId')
    op.drop_column('trade', 'volatilityOrderLink')
    op.drop_column('trade', 'orderReference')
    op.drop_column('trade', 'brokerageOrderID')
    op.drop_column('trade', 'rtn')
    op.drop_column('trade', 'relatedTransactionID')
    op.drop_column('trade', 'ibExecID')
    op.drop_column('trade', 'transactionID')
    op.drop_column('trade', 'ibOrderID')
    op.drop_column('trade', 'clearingFirmID')
    op.drop_column('trade', 'buySell')
    op.drop_column('trade', 'origTransactionID')
    op.drop_column('trade', 'origOrderID')
    op.drop_column('trade', 'origTradeID')
    op.drop_column('trade', 'origTradeDate')
    op.drop_column('trade', 'origTradePrice')
    op.drop_column('trade', 'mtmPnl')
    op.drop_column('trade', 'fifoPnlRealized')
    op.drop_column('trade', 'cost')
    op.drop_column('trade', 'openCloseIndicator')
    op.drop_column('trade', 'closePrice')
    op.drop_column('trade', 'netCash')
    op.drop_column('trade', 'ibCommissionCurrency')
    op.drop_column('trade', 'ibCommission')
    op.drop_column('trade', 'taxes')
    op.drop_column('trade', 'proceeds')
    op.drop_column('trade', 'tradeMoney')
    op.drop_column('trade', 'tradePrice')
    op.drop_column('trade', 'quantity')
    op.drop_column('trade', 'exchange')
    op.drop_column('trade', 'transactionType')
    op.drop_column('trade', 'settleDateTarget')
    op.drop_column('trade', 'principalAdjustFactor')
    op.drop_column('trade', 'tradeDate')
    op.drop_column('trade', 'putCall')
    op.drop_column('trade', 'dateTime')
    op.drop_column('trade', 'expiry')
    op.drop_column('trade', 'reportDate')
    op.drop_column('trade', 'strike')
    op.drop_column('trade', 'relatedTradeID')
    op.drop_column('trade', 'multiplier')
    op.drop_column('trade', 'issuerCountryCode')
    op.drop_column('trade', 'issuer')
    op.drop_column('trade', 'underlyingListingExchange')
    op.drop_column('trade', 'underlyingSecurityID')
    op.drop_column('trade', 'underlyingSymbol')
    op.drop_column('trade', 'underlyingConid')
    op.drop_column('trade', 'listingExchange')
    op.drop_column('trade', 'figi')
    op.drop_column('trade', 'isin')
    op.drop_column('trade', 'cusip')
    op.drop_column('trade', 'securityIDType')
    op.drop_column('trade', 'securityID')
    op.drop_column('trade', 'conid')
    op.drop_column('trade', 'description')
    op.drop_column('trade', 'subCategory')
    op.drop_column('trade', 'assetCategory')
    op.drop_column('trade', 'fxRateToBase')
    op.drop_column('trade', 'currency')
    op.drop_column('trade', 'model')
    op.drop_column('trade', 'acctAlias')
    op.drop_column('trade', 'accountId')
    op.drop_column('trade', 'tradeID')
    op.drop_table('manualtrade')
    # ### end Alembic commands ###